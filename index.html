<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CD Player</title>
</head>
<body>

<div class="window" style="width:320px">
    <div class="title-bar">
        <div class="title-bar-text">
            <img src="https://images2.imgbox.com/42/89/JIRoQjUo_o.png"/>
            CD Player
        </div>
        <div class="title-bar-controls">
            <p class="control-butt minimize"></p>
            <p class="control-butt maximize"></p>
            <p class="control-butt close"></p>
        </div>
    </div>
    <div class="window-body">
        <p class="toptoptop">
            <span><u>D</u>isc</span>
            <span><u>V</u>iew</span>
            <span><u>O</u>ptions</span>
            <span><u>H</u>elp</span>
        </p>
        <p id="text2">[00] 00:00</p>
        <div class="buttontos">
            <p id="playButton" class="control-butt">▶</p>
            <p id="pauseButton" class="control-butt">❚❚</p>
            <p id="stopButton" class="control-butt"><span>◼</span></p>
            <p id="previousTrackButton" class="control-butt">❚◄◄</p>
            <p id="rewindButton" class="control-butt">◄◄</p>
            <p id="forwardButton" class="control-butt">►►</p>
            <p id="nextTrackButton" class="control-butt">►►❚</p>
            <p id="ejectButton" class="control-butt"><span>❚ ►</span></p>
        </div>
        <div class="ahhh">
            <p id="label"><u>A</u>rtist:</p>
            <p id="text" class="artist"></p>
            <p id="label">Title:</p>
            <p id="text" class="title"></p>
        </div>
    </div>
    <div class="status-bar">
        <p class="status-bar-field">Total Play: 00:00 m:s</p>
        <p class="status-bar-field">Track: 00:00 m:s</p>
    </div>
</div>

<style>
    :root {
        /* Estas variáveis servem como um 'fallback' visual antes do JS carregar. */
        /* A fonte da verdade para as músicas está na lista do JavaScript. */
        --artist: "Devon Hendryx";
        --title: "Missing Image File";
        --albumcover: url(https://m.media-amazon.com/images/I/71NmRa8Sp7L._AC_SL1500_.jpg);
    }
    
    /* Estilos Gerais da Janela */
    .status-bar, .title-bar, .title-bar-controls {
        display: flex;
    }
    
    .window {
        background: silver;
        margin: auto;
        text-shadow: none;
        box-shadow: inset -1px -1px #0a0a0a, inset 1px 1px #dfdfdf, inset -2px -2px grey, inset 2px 2px #fff;
        padding: 3px;
        color: #000!important;
        font-family: "Pixelated MS Sans Serif"!important;
    }
    
    .window * {
        -webkit-font-smoothing: none;
        font-family: "Pixelated MS Sans Serif", Arial;
        font-size: 11px;
        text-shadow: inherit;
    }

    .window img {
        filter: none!important;
    }

    p#text, p#text2 {
        box-shadow: inset -1px -1px #fff, inset 1px 1px grey, inset -2px -2px #dfdfdf, inset 2px 2px #0a0a0a;
        box-sizing: border-box;
        margin-block: 3px;
    }

    .control-butt, p#text, p#text2 {
        box-sizing: border-box;
    }
    
    p#label, p#text, p#text2 {
        margin-block: 3px;
    }
    
    .status-bar, .title-bar-text, .toptoptop, .control-butt, p#label, p#text2 {
        user-select: none;
    }
    
    @font-face {
        font-family: "Pixelated MS Sans Serif";
        font-style: normal;
        font-weight: 400;
        src: url(https://unpkg.com/98.css@0.1.20/dist/ms_sans_serif.woff) format("woff");
        src: url(https://unpkg.com/98.css@0.1.20/dist/ms_sans_serif.woff2) format("woff2");
    }
    
    @font-face {
        font-family: "Pixelated MS Sans Serif";
        font-style: normal;
        font-weight: 700;
        src: url(https://unpkg.com/98.css@0.1.20/dist/ms_sans_serif_bold.woff) format("woff");
        src: url(https://unpkg.com/98.css@0.1.20/dist/ms_sans_serif_bold.woff2) format("woff2");
    }

    /* Barra de Título */
    .title-bar {
        align-items: center;
        background: linear-gradient(90deg, navy, #1084d0);
        justify-content: space-between;
        padding: 2px;
    }
    
    .title-bar-text {
        color: #fff;
        font-weight: 700;
        letter-spacing: 0;
        margin-right: 24px;
        line-height: 15px;
    }

    .title-bar-text img {
        vertical-align: bottom;
        margin-inline: 2px;
    }
    
    /* Corpo da Janela */
    .window-body {
        margin: 8px;
    }
    
    .toptoptop {
        text-align: left;
        margin-top: -3px!important;
        margin-bottom: 5px!important;
        margin-inline: 0px!important;
    }
    
    .toptoptop span {
        border: 1px solid silver;
        padding: 2px 4px;
    }

    /* Display de tempo e imagem */
    p#text2 {
        position: relative;
        display: inline-block;
        padding: 13px 4px;
        width: 54%;
        font-size: 20px;
        text-align: center;
        color: olive;
        background: #000;
        z-index: 999;
    }
    
    p#text2:before {
        content: "";
        display: block;
        position: absolute;
        top: 1px;
        left: 1px;
        background-image: var(--albumcover); /* MODIFICADO: usa a variável aqui */
        width: 98%;
        height: 96%;
        opacity: .5;
        background-size: cover;
        background-position: center;
        z-index: -1;
    }

    /* --- ESTILOS DOS BOTÕES --- */

    /* Container dos botões */
    .buttontos {
        display: inline-block;
        width: 45%;
        height: 54px;
        vertical-align: top;
        text-align: center;
    }

    /* Estilo base para todos os botões de controle */
    .control-butt {
        display: inline-block;
        border: none;
        border-radius: 0;
        background: silver;
        min-height: 23px;
        min-width: 20px;
        max-width: 20px;
        margin: 2px;
        padding: 6px 0;
        box-shadow: inset -1px -1px #0a0a0a, inset 1px 1px #fff, inset -2px -2px grey, inset 2px 2px #dfdfdf;
        color: #000;
        text-shadow: 1px 1px #fff;
        line-height: 10px;
        cursor: pointer;
        font-size: 12px;
        white-space: nowrap;
    }

    .control-butt:active {
        box-shadow: inset -1px -1px #fff, inset 1px 1px #0a0a0a, inset -2px -2px #dfdfdf, inset 2px 2px grey;
        text-shadow: 1px 1px #222;
    }
    
    .control-butt:focus {
        outline: #000 dotted 1px;
        outline-offset: -4px;
    }

    /* Estilos específicos para cada botão */
    #playButton {
        min-width: 75px;
    }

    #pauseButton, #stopButton {
        text-indent: -5px;
        font-weight: 700;
    }

    #stopButton span {
        display: block;
        transform: translate(2px, -2px) scale(1.2);
    }
    
    #previousTrackButton, #rewindButton, #forwardButton, #nextTrackButton {
        text-indent: -8px;
        font-weight: 700;
        letter-spacing: -4px;
        font-size: 10px;
    }

    #ejectButton {
        text-indent: -8px;
        font-weight: 700;
        letter-spacing: -1.5px;
        text-shadow: none;
        transform: translateY(1px);
    }
    
    #ejectButton span {
        display: block;
        transform: rotate(-90deg) translate(2px, 0) scaleY(1.4);
        color: #000;
    }
    
    /* Artista e Título */
    .ahhh {
        text-align: right;
    }
    
    p#label {
        display: inline-block;
        width: fit-content;
        margin-right: 5px;
        font-size: 12px;
    }

    p#text {
        display: inline-block;
        background-color: #fff;
        padding: 4px;
        width: 85%;
        text-align: left;
        font-size: 12px;
    }

    p#text.artist:after {
        content: var(--artist);
    }
    
    p#text.title:after {
        content: var(--title);
    }

    .title, .artist {
        height: 23px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        padding-right: 20px!important;
        vertical-align: bottom;
    }
    
    /* Barra de Status */
    .status-bar {
        gap: 1px;
        margin: 0 1px;
    }

    .status-bar-field {
        box-shadow: inset -1px -1px #dfdfdf, inset 1px 1px grey;
        flex-grow: 1;
        margin: 0;
        padding: 2px 3px;
    }

</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const playButton = document.getElementById('playButton');
        const pauseButton = document.getElementById('pauseButton');
        const stopButton = document.getElementById('stopButton');
        const nextButton = document.getElementById('nextTrackButton');
        const previousButton = document.getElementById('previousTrackButton');
        
        const artistText = document.querySelector('.artist');
        const titleText = document.querySelector('.title');
        const timeDisplay = document.getElementById('text2');
        const totalPlayDisplay = document.querySelector('.status-bar-field:first-child');
        const trackTimeDisplay = document.querySelector('.status-bar-field:last-child');

        // --- LISTA DE MÚSICAS MODIFICADA ---
        const playlist = [
            {
                artist: "Devon Hendryx",
                title: "Missing Image File",
                url: "https://file.garden/ZTEy8B_Kk2a-pgpT/devon-hendryx-missing-image-file-maladaptivedaydreaming.mp3", // URL real
                albumCoverUrl: "https://m.media-amazon.com/images/I/71NmRa8Sp7L._AC_SL1500_.jpg" // NOVO: Link da capa
            },
            {
                artist: "Radiohead",
                title: "Jigsaw Falling Into Place",
                url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3",
                albumCoverUrl: "https://m.media-amazon.com/images/I/A1MwaIeBpwL._AC_SX679_.jpg" // NOVO: Link da capa
            },
            {
                artist: "Death Grips",
                title: "I've Seen Footage",
                url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3",
                albumCoverUrl: "https://imusic.b-cdn.net/images/item/original/119/0886919635119.jpg?death-grips-2012-the-money-store-lp&class=scaled&v=1647319621" // NOVO: Link da capa
            }
        ];
        
        const audio = new Audio();
        let currentTrackIndex = 0;
        let isPlaying = false;
        
        // --- FUNÇÃO DE DISPLAY MODIFICADA ---
        function updateDisplay() {
            const currentTrack = playlist[currentTrackIndex];
            const root = document.documentElement;
            
            // Atualiza as variáveis CSS para mostrar artista, título E a capa do álbum
            root.style.setProperty('--artist', `"${currentTrack.artist}"`);
            root.style.setProperty('--title', `"${currentTrack.title}"`);
            // MODIFICADO: Adiciona a linha para atualizar a capa do álbum
            root.style.setProperty('--albumcover', `url('${currentTrack.albumCoverUrl}')`);
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return "00:00";
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            return `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
        }

        function playMusic() {
            if (!audio.src || audio.src !== playlist[currentTrackIndex].url) {
                loadTrack(currentTrackIndex, true);
            } else {
                audio.play();
                isPlaying = true;
            }
        }

        function pauseMusic() {
            if (isPlaying) {
                audio.pause();
                isPlaying = false;
            }
        }
        
        function stopMusic() {
            audio.pause();
            audio.currentTime = 0;
            isPlaying = false;
            timeDisplay.textContent = `[${String(currentTrackIndex + 1).padStart(2, '0')}] 00:00`;
            trackTimeDisplay.textContent = `Track: 00:00 m:s`;
        }
        
        function loadTrack(trackIndex, autoplay = false) {
            currentTrackIndex = trackIndex;
            audio.src = playlist[currentTrackIndex].url;
            updateDisplay();
            stopMusic(); // Para o som e reseta o tempo da faixa anterior
            if (autoplay) {
                audio.play();
                isPlaying = true;
            }
        }

        function nextTrack() {
            const newIndex = (currentTrackIndex + 1) % playlist.length;
            loadTrack(newIndex, isPlaying || !audio.paused);
        }

        function previousTrack() {
            const newIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
            loadTrack(newIndex, isPlaying || !audio.paused);
        }

        playButton.addEventListener('click', playMusic);
        pauseButton.addEventListener('click', pauseMusic);
        stopButton.addEventListener('click', stopMusic);
        nextButton.addEventListener('click', nextTrack);
        previousButton.addEventListener('click', previousTrack);
        
        audio.addEventListener('timeupdate', () => {
            const currentTime = audio.currentTime;
            const duration = audio.duration;
            
            if (!isNaN(duration)) {
                totalPlayDisplay.textContent = `Total Play: ${formatTime(duration)} m:s`;
            }
            trackTimeDisplay.textContent = `Track: ${formatTime(currentTime)} m:s`;
            timeDisplay.textContent = `[${String(currentTrackIndex + 1).padStart(2, '0')}] ${formatTime(currentTime)}`;
        });
        
        audio.addEventListener('ended', nextTrack);

        // Inicializa o display com a primeira faixa da lista do Javascript
        updateDisplay();
    });
</script>

</body>
</html>
